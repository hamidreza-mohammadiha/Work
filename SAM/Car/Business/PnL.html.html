<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Saman Insurance - Loss Development Triangle Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet" />
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f0f4f8;
        }
        
        .vertical-slider {
            writing-mode: bt-lr; /* IE */
            -webkit-appearance: slider-vertical; /* WebKit */
            width: 10px;
            height: 300px;
            padding: 0 12px;
        }
        
        .slider-container {
            background: linear-gradient(to bottom, #ffffff, #f7f9fc);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            border: 1px solid #e2e8f0;
        }
        
        .slider-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            display: block;
        }
        
        .slider-value {
            background: #edf2f7;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            display: inline-block;
            margin-top: 8px;
        }
        
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-top: 30px;
            border: 1px solid #e2e8f0;
        }
        
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }
        
        table {
            min-width: 1000px;
        }
        
        .header-gradient {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
        }
        
        .dashboard-card {
            transition: all 0.3s ease;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.08);
        }
        
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            margin-top: -8px;
            box-shadow: 0 2px 6px rgba(37, 99, 235, 0.4);
        }
        
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: #cbd5e0;
            border-radius: 4px;
        }
        
        .vertical-slider-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 15px;
        }
        
        .horizontal-slider-container {
            padding: 15px 20px;
        }
        
        .controls-section {
            display:contents;
            gap: 30px;
            margin-bottom: 30px;
        }
    </style>
</head>
<body class="font-inter text-gray-800">
    <div class="container mx-auto px-4 py-8 max-w-10xl">
        <header class="header-gradient text-white p-6 rounded-t-lg shadow-md">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold mb-2">Saman Insurance</h1>
                    <h2 class="text-xl">Loss Development Triangle Report</h2>
                </div>
                <div class="bg-white/20 px-4 py-2 rounded-full">
                    <span id="current-date" class="font-semibold"></span>
                </div>
            </div>
        </header>



        <section class="bg-white shadow-lg rounded-b-lg p-6">
            <div class="grid md:grid-cols-3 gap-4 mb-6">
                <div class="dashboard-card bg-green-50 p-4 rounded">
                    <h3 class="font-semibold text-green-800">Policies with Claims</h3>
                    <p class="text-2xl text-green-600">61,983</p>
                </div>
                <div class="dashboard-card bg-red-50 p-4 rounded">
                    <h3 class="font-semibold text-red-800">Total Paid Loss</h3>
                    <p class="text-2xl text-red-600">11,725,584,470,781</p>
                </div>
                <div class="dashboard-card bg-blue-50 p-4 rounded">
                    <h3 class="font-semibold text-blue-800">Overall Loss Ratio</h3>
                    <p class="text-2xl text-blue-600">57.1%</p>
                </div>
            </div>

            <div class="controls-section">

                                <div class="chart-container">
            <h3 class="text-xl font-bold mb-6 text-center">Profit and Loss Analysis by Accident Year</h3>
            <canvas id="pnlChart"></canvas>
        </div>


                <div class="slider-container">
                    <div class="horizontal-slider-container">
                        <span class="slider-label">Interest Rate</span>
                        <input type="range" id="interest-rate" min="1" max="100" value="1">
                        <span id="interest-rate-value" class="slider-value">10%</span>
                    </div>
                </div>
                
                <div class="slider-container">
                    <div class="horizontal-slider-container">
                        <span class="slider-label">Dollar Exchange Rate (1$ = <span id="exchange-rate-value">1,000,000</span> Rials)</span>
                        <input type="range" id="exchange-rate" min="500000" max="1500000" value="1000000">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>500,000</span>
                            <span>1,500,000</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-3 text-left">Accident Year</th>
                            <th class="border p-3 text-center">Total Premium</th>
                            <th class="border p-3 text-center">Development Year 1</th><th class="border p-3 text-center">Development Year 2</th><th class="border p-3 text-center">Development Year 3</th><th class="border p-3 text-center">Development Year 4</th><th class="border p-3 text-center">Development Year 5</th>
                            <th class="border p-3 text-center">Total Loss</th>
                            <th class="border p-3 text-center">Loss Ratio</th>
                        </tr>
                    </thead>
                    <tbody>
                        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1385</td>
            <td class="border p-3 text-center">3,303,261,514</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">101,131,999 <br><span class="text-sm">(3.1%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">1,602,097,994 <br><span class="text-sm">(48.5%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">1,912,159,804 <br><span class="text-sm">(57.9%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">1,958,029,204 <br><span class="text-sm">(59.3%)</span></td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">1,958,029,204</td>
            <td class="border p-3 text-center font-bold bg-green-100 text-green-800">59.3%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1386</td>
            <td class="border p-3 text-center">17,433,850,372</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">1,618,470,291 <br><span class="text-sm">(9.3%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">7,826,259,541 <br><span class="text-sm">(44.9%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">10,509,121,101 <br><span class="text-sm">(60.3%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">11,505,773,017 <br><span class="text-sm">(66.0%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">11,632,446,552 <br><span class="text-sm">(66.7%)</span></td>
            <td class="border p-3 text-center font-bold">11,635,946,552</td>
            <td class="border p-3 text-center font-bold bg-yellow-100 text-yellow-800">66.7%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1387</td>
            <td class="border p-3 text-center">15,553,810,794</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">2,589,123,969 <br><span class="text-sm">(16.6%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">10,589,880,861 <br><span class="text-sm">(68.1%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">12,584,650,906 <br><span class="text-sm">(80.9%)</span></td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">12,644,906,906</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">81.3%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1388</td>
            <td class="border p-3 text-center">21,975,685,653</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">4,703,785,419 <br><span class="text-sm">(21.4%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">13,231,602,980 <br><span class="text-sm">(60.2%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">13,348,267,980 <br><span class="text-sm">(60.7%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">13,416,267,980 <br><span class="text-sm">(61.1%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">13,570,176,057 <br><span class="text-sm">(61.8%)</span></td>
            <td class="border p-3 text-center font-bold">13,570,176,057</td>
            <td class="border p-3 text-center font-bold bg-yellow-100 text-yellow-800">61.8%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1389</td>
            <td class="border p-3 text-center">33,914,237,228</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">11,638,357,845 <br><span class="text-sm">(34.3%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">27,423,565,242 <br><span class="text-sm">(80.9%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">30,790,705,927 <br><span class="text-sm">(90.8%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">31,161,345,927 <br><span class="text-sm">(91.9%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">31,161,745,927 <br><span class="text-sm">(91.9%)</span></td>
            <td class="border p-3 text-center font-bold">31,533,545,927</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">93.0%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1390</td>
            <td class="border p-3 text-center">47,601,193,953</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">15,693,905,144 <br><span class="text-sm">(33.0%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">49,622,019,144 <br><span class="text-sm">(104.2%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">51,642,061,400 <br><span class="text-sm">(108.5%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">51,669,721,400 <br><span class="text-sm">(108.5%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">51,765,721,400 <br><span class="text-sm">(108.7%)</span></td>
            <td class="border p-3 text-center font-bold">51,765,721,400</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">108.7%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1391</td>
            <td class="border p-3 text-center">75,414,262,148</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">24,479,276,649 <br><span class="text-sm">(32.5%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">78,542,647,800 <br><span class="text-sm">(104.1%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">81,479,350,619 <br><span class="text-sm">(108.0%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">81,760,370,450 <br><span class="text-sm">(108.4%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">81,996,741,618 <br><span class="text-sm">(108.7%)</span></td>
            <td class="border p-3 text-center font-bold">82,083,917,616</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">108.8%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1392</td>
            <td class="border p-3 text-center">116,296,644,724</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">49,228,249,931 <br><span class="text-sm">(42.3%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">103,144,412,729 <br><span class="text-sm">(88.7%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">111,635,980,299 <br><span class="text-sm">(96.0%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">111,656,480,299 <br><span class="text-sm">(96.0%)</span></td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">113,832,230,299</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">97.9%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1393</td>
            <td class="border p-3 text-center">128,426,822,346</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">37,813,233,210 <br><span class="text-sm">(29.4%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">114,883,402,710 <br><span class="text-sm">(89.5%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">118,144,699,735 <br><span class="text-sm">(92.0%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">118,214,718,055 <br><span class="text-sm">(92.0%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">118,240,433,055 <br><span class="text-sm">(92.1%)</span></td>
            <td class="border p-3 text-center font-bold">118,240,433,055</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">92.1%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1394</td>
            <td class="border p-3 text-center">125,729,506,698</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">33,238,061,593 <br><span class="text-sm">(26.4%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">78,256,603,232 <br><span class="text-sm">(62.2%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">79,948,344,634 <br><span class="text-sm">(63.6%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">79,990,793,134 <br><span class="text-sm">(63.6%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">80,263,193,944 <br><span class="text-sm">(63.8%)</span></td>
            <td class="border p-3 text-center font-bold">80,263,193,944</td>
            <td class="border p-3 text-center font-bold bg-yellow-100 text-yellow-800">63.8%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1395</td>
            <td class="border p-3 text-center">134,589,771,169</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">29,562,188,048 <br><span class="text-sm">(22.0%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">84,779,769,744 <br><span class="text-sm">(63.0%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">97,545,269,667 <br><span class="text-sm">(72.5%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">97,850,238,047 <br><span class="text-sm">(72.7%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">97,944,915,179 <br><span class="text-sm">(72.8%)</span></td>
            <td class="border p-3 text-center font-bold">97,944,915,179</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">72.8%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1396</td>
            <td class="border p-3 text-center">225,447,925,920</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">40,606,988,278 <br><span class="text-sm">(18.0%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">137,136,916,907 <br><span class="text-sm">(60.8%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">149,095,072,762 < br><span class="text-sm">(66.1%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">156,262,685,598 <br><span class="text-sm">(69.3%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">219,892,339,854 <br><span class="text-sm">(97.5%)</span></td>
            <td class="border p-3 text-center font-bold">334,689,955,922</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">148.5%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1397</td>
            <td class="border p-3 text-center">448,550,198,697</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">93,285,325,509 <br><span class="text-sm">(20.8%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">320,430,363,031 <br><span class="text-sm">(71.4%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">410,882,674,798 <br><span class="text-sm">(91.6%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">446,902,704,353 <br><span class="text-sm">(99.6%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">470,222,351,602 <br><span class="text-sm">(104.8%)</span></td>
            <td class="border p-3 text-center font-bold">471,446,559,616</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">105.1%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1398</td>
            <td class="border p-3 text-center">851,490,213,551</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">223,088,018,669 <br><span class="text-sm">(26.2%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">625,789,881,655 <br><span class="text-sm">(73.5%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">780,593,774,436 <br><span class="text-sm">(91.7%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">872,520,233,666 <br><span class="text-sm">(102.5%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">905,640,194,793 <br><span class="text-sm">(106.4%)</span></td>
            <td class="border p-3 text-center font-bold">930,997,785,680</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">109.3%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1399</td>
            <td class="border p-3 text-center">646,599,083,507</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">289,626,670,886 <br><span class="text-sm">(44.8%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">687,552,931,007 <br><span class="text-sm">(106.3%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">724,550,274,652 <br><span class="text-sm">(112.1%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">727,557,725,140 <br><span class="text-sm">(112.5%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">728,726,059,156 <br><span class="text-sm">(112.7%)</span></td>
            <td class="border p-3 text-center font-bold">728,726,059,156</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">112.7%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1400</td>
            <td class="border p-3 text-center">885,240,170,744</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">292,288,339,322 <br><span class="text-sm">(33.0%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">913,699,642,271 <br><span class="text-sm">(103.2%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">951,525,131,251 < br><span class="text-sm">(107.5%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">959,029,543,767 <br><span class="text-sm">(108.3%)</span></td><td class="border p-3 text-center bg-purple-50 text-purple-700">959,507,381,484 < br><span class="text-sm">(108.4%)</span></td>
            <td class="border p-3 text-center font-bold">959,507,381,484</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">108.4%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1401</td>
            <td class="border p-3 text-center">1,362,286,167,238</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">421,107,967,596 <br><span class="text-sm">(30.9%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">1,443,870,248,686 <br><span class="text-sm">(106.0%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">1,589,380,747,038 <br><span class="text-sm">(116.7%)</span></td><td class="border p-3 text-center bg-yellow-50 text-yellow-700">1,602,067,685,069 <br><span class="text-sm">(117.6%)</span></td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">1,602,067,685,069</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">117.6%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1402</td>
            <td class="border p-3 text-center">2,217,283,578,655</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">603,391,174,881 <br><span class="text-sm">(27.2%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">2,562,397,367,466 <br><span class="text-sm">(115.6%)</span></td><td class="border p-3 text-center bg-blue-50 text-blue-700">3,138,495,297,332 <br><span class="text-sm">(141.5%)</span></td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">3,138,495,297,332</td>
            <td class="border p-3 text-center font-bold bg-red-100 text-red-800">141.5%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1403</td>
            <td class="border p-3 text-center">8,782,153,539,646</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">1,268,051,680,704 <br><span class="text-sm">(14.4%)</span></td><td class="border p-3 text-center bg-green-50 text-green-700">2,802,637,490,700 <br><span class="text-sm">(31.9%)</span></td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">2,802,637,490,700</td>
            <td class="border p-3 text-center font-bold bg-green-100 text-green-800">31.9%</td>
        </tr>
        
        <tr class="hover:bg-gray-50">
            <td class="border p-3 font-semibold">1404</td>
            <td class="border p-3 text-center">4,401,412,273,977</td>
            <td class="border p-3 text-center bg-green-50 text-green-700">141,543,239,683 <br><span class="text-sm">(3.2%)</span></td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td><td class="border p-3 text-center">-</td>
            <td class="border p-3 text-center font-bold">141,543,239,683</td>
            <td class="border p-3 text-center font-bold bg-green-100 text-green-800">3.2%</td>
        </tr>
        
                        <tr class="bg-gray-100 font-bold">
                            <td class="border p-3">Overall</td>
                            <td class="border p-3 text-center">20,540,702,198,534</td>
                            <td class="border p-3 text-center" style="font-size: x-large;"><span class="text-sm">(26.2%)</span></td><td class="border p-3 text-center"><span class="text-sm">(73.5%)</span></td><td class="border p-3 text-center"><span class="text-sm">(91.7%)</span></td><td class="border p-3 text-center"><span class="text-sm">(102.5%)</span></td><td class="border p-3 text-center"><span class="text-sm">(106.4%)</span></td>
                            <td class="border p-3 text-center">11,725,584,470,781</td>
                            <td class="border p-3 text-center">57.1%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

                <div class="mt-4 bg-white p-6 rounded shadow">
            <h3 class="font-bold mb-2 text-lg">Development Year Percentage Calculation</h3>
            <p class="text-gray-600">
                Percentage = (Cumulative Loss for Development Year / Total Premium) × 100%
            </p>
            <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold text-blue-800 mb-2">PnL Calculation:</h4>
                <p>PnL = (Total Premium - Total Loss) / Exchange Rate × (1 + Interest Rate)<sup>years</sup></p>
                <p class="text-sm mt-2">* Interest rate applied to account for time value of money</p>
            </div>
        </div>



        <footer class="text-center text-gray-500 mt-6 py-4 border-t">
            <p>© 2025 Saman Insurance | Loss Development Report | <span id="current-year"></span></p>
        </footer>
    </div>

    <script>
        // Set current date and year
        const now = new Date();
        document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
        document.getElementById('current-year').textContent = now.getFullYear();
        
        // Parse numbers with commas
        function parseNumber(str) {
            return parseFloat(str.replace(/,/g, ''));
        }
        
        // Format number with commas
        function formatNumber(num) {
            return num.toLocaleString();
        }
        
        // Get the table data
        let pnlData = [];
        const tableRows = document.querySelectorAll('section table tbody tr');
        
        // Exclude the last row (overall)
        for (let i = 0; i < tableRows.length - 1; i++) {
            let row = tableRows[i];
            let year = row.cells[0].textContent.trim();
            let premium = parseNumber(row.cells[1].textContent.trim());
            let totalLoss = parseNumber(row.cells[7].textContent.trim());
            pnlData.push({ year, premium, totalLoss });
        }
        
        // Get the sliders
        const interestRateSlider = document.getElementById('interest-rate');
        const exchangeRateSlider = document.getElementById('exchange-rate');
        const interestRateValue = document.getElementById('interest-rate-value');
        const exchangeRateValue = document.getElementById('exchange-rate-value');
        
        // Initialize the chart
        const ctx = document.getElementById('pnlChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: pnlData.map(item => item.year),
                datasets: [{
                    label: 'Profit and Loss (in $)',
                    data: [],
                    backgroundColor: function(context) {
                        const value = context.dataset.data[context.dataIndex];
                        return value >= 0 ? 'rgba(72, 187, 120, 0.7)' : 'rgba(229, 62, 62, 0.7)';
                    },
                    borderColor: function(context) {
                        const value = context.dataset.data[context.dataIndex];
                        return value >= 0 ? 'rgba(56, 161, 105, 1)' : 'rgba(220, 38, 38, 1)';
                    },
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += new Intl.NumberFormat('en-US', { 
                                        style: 'currency', 
                                        currency: 'USD',
                                        minimumFractionDigits: 0,
                                        maximumFractionDigits: 0
                                    }).format(context.parsed.y);
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Profit/Loss (USD)'
                        },
                        ticks: {
                            callback: function(value) {
                                return new Intl.NumberFormat('en-US', { 
                                    style: 'currency', 
                                    currency: 'USD',
                                    minimumFractionDigits: 0,
                                    maximumFractionDigits: 0
                                }).format(value);
                            }
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Accident Year'
                        }
                    }
                }
            }
        });
        
        // Function to calculate PnL
        function calculatePnL() {
            const interestRate = parseInt(interestRateSlider.value) / 100;
            const exchangeRate = parseInt(exchangeRateSlider.value);
            
            // Update display values
            interestRateValue.textContent = interestRateSlider.value + '%';
            exchangeRateValue.textContent = formatNumber(exchangeRate);
            
            // Calculate new data
            const newData = pnlData.map(item => {
                // Calculate basic PnL in dollars
                const pnlDollars = (item.premium - item.totalLoss) / exchangeRate;
                
                // Apply interest rate adjustment (simplified for demonstration)
                // In a real scenario, this would account for the time value of money
                const yearsPast = 1404 - parseInt(item.year);
                const adjustedPnl = pnlDollars * Math.pow(1 + interestRate, yearsPast);
                
                return adjustedPnl;
            });
            
            // Update the chart
            chart.data.datasets[0].data = newData;
            chart.update();
        }
        
        // Add event listeners to sliders
        interestRateSlider.addEventListener('input', calculatePnL);
        exchangeRateSlider.addEventListener('input', calculatePnL);
        
        // Initialize the chart with data
        calculatePnL();
    </script>
</body>
</html>